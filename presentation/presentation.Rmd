---
title: "Production d'≈ìufs et conditions d'√©levage"
subtitle: "Quand les donn√©es parlent, la science avance"
author: "Mezankou valdes bravo,Emmanuel Mbatchou,NSE Mbia Heumbia Emmanuel,Bah Idrissa 
"
institute: "UQAC"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r load-packages, include = FALSE}
# Ajoutez tous les packages suppl√©mentaires dont vous avez besoin √† ce chunk
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(knitr)
library(xaringanthemer)
```

```{r setup, include=FALSE}
# Pour une meilleure r√©solution de figure
knitr::opts_chunk$set(fig.retina = 3, dpi = 300, fig.width = 6, fig.asp = 0.618, out.width = "80%", warning = FALSE, message = FALSE)
style_xaringan(

  title_slide_background_image = "img/poultr.avif",
  colors =  c(
    primary = "#bad4ed",   
    secondary = "#ffcccb", 
    accent = "#7CFC00" ,
    desc = "#FF6347"
  )
)
style_extra_css(
  css = list(
    ".wide-table" = list(
      "width" = "100%",
      "table-layout" = "fixed",
      "border-collapse" = "collapse"
    ),
    ".wide-table th, .wide-table td" = list(
      "padding" = "10px",
      "text-align" = "center",
      "border" = "1px solid #ddd"
    ),
    "h3" = list(
      "color" = "#FF6347",       # Couleur par d√©faut pour les titres `###`
      "font-weight" = "bold"  # Facultatif : gras
    )
  )
)

```

```{r load-data, include=FALSE}
eggdata <- read.csv("../data/GallusGallusDomesticus.csv")
```



class: center, middle


###<span class='desc'> Objectif üéØ :</span>
Comprendre les principaux **facteurs biologiques** et **environnementaux** influen√ßant la production d‚Äô≈ìufs chez les poules domestiques.


###<span class="desc"> Question de recherche ‚ùì</span>
Quels sont les **facteurs d√©terminants** pour la production d‚Äô≈ìufs, en tenant compte‚ÄØ:
- De la **race des poules**.
- De leur **alimentation** et **exposition au soleil**.
- De leurs **caract√©ristiques physiques** (poids, couleur des ≈ìufs, etc.)‚ÄØ?

---

class: --accent, middle 

## <span class="desc">Variables cl√©s : R√©sultat et Explicatives </span>

.pull-left[
### <span class="desc">Variable de r√©sultat (Y)</span>
- **Production d‚Äô≈ìufs par jour** (`EggsPerDay`)


### <span class="desc">Variables explicatives (X)</span>
- **Poids des poules** (`GallusWeight`)
- **Quantit√© de nourriture donn√©e** (`AmountOfFeed`)
- **Exposition au soleil** (`SunLightExposure`)
- **Race de poule** (`GallusBreed`)
- **Poids des ≈ìufs** (`GallusEggWeight`)
]

.pull-right[
```{r var-table, echo=FALSE}
# Tableau des variables
library(knitr)
kable(
  data.frame(
    Variable = c("EggsPerDay", "GallusWeight", "AmountOfFeed", "SunLightExposure", "GallusBreed", "GallusEggWeight"),
    Type = c("Num√©rique", "Num√©rique", "Num√©rique", "Num√©rique", "Cat√©gorielle", "Num√©rique"),
    Description = c(
      "Nombre d'≈ìufs pondus par jour",
      "Poids des poules (grammes)",
      "Quantit√© de nourriture (grammes/jour)",
      "Dur√©e d'exposition au soleil (heures/jour)",
      "Race des poules",
      "Poids moyen des ≈ìufs (grammes)"
    )
  ),
  format = "html"
)
```
]

```{r echo=FALSE}
summary_table <- eggdata %>%
  select(EggsPerDay, GallusWeight, AmountOfFeed, SunLightExposure, GallusEggWeight) %>%
  summarise(
    Variable = c("Production d'≈ìufs", 
                 "Poids des poules", 
                 "Quantit√© de nourriture", 
                 "Exposition au soleil", 
                 "Poids des ≈ìufs"),
    Moyenne = c(mean(EggsPerDay, na.rm = TRUE),
                mean(GallusWeight, na.rm = TRUE),
                mean(AmountOfFeed, na.rm = TRUE),
                mean(SunLightExposure, na.rm = TRUE),
                mean(GallusEggWeight, na.rm = TRUE)),
    Minimum = c(min(EggsPerDay, na.rm = TRUE),
                min(GallusWeight, na.rm = TRUE),
                min(AmountOfFeed, na.rm = TRUE),
                min(SunLightExposure, na.rm = TRUE),
                min(GallusEggWeight, na.rm = TRUE)),
    Maximum = c(max(EggsPerDay, na.rm = TRUE),
                max(GallusWeight, na.rm = TRUE),
                max(AmountOfFeed, na.rm = TRUE),
                max(SunLightExposure, na.rm = TRUE),
                max(GallusEggWeight, na.rm = TRUE)),
    `√âcart Type` = c(sd(EggsPerDay, na.rm = TRUE),
                     sd(GallusWeight, na.rm = TRUE),
                     sd(AmountOfFeed, na.rm = TRUE),
                     sd(SunLightExposure, na.rm = TRUE),
                     sd(GallusEggWeight, na.rm = TRUE))
  )

```
---
class: inverse, middle, center

# **Analyse exploratoire pr√©liminaire**
---

```{r echo=FALSE}
kable(summary_table, format = "html", caption = "Statistiques descriptives des variables principales",table.attr = "class='wide-table'")

```
.pull-left[
ü•ö **<span class="desc">Production d'≈ìufs par jour</span>** : 0.96 ≈ìuf/jour.

*Les poules pondent presque un ≈ìuf par jour, avec des variations normales (0 ou 1 ≈ìuf).*

‚öñÔ∏è **<span class="desc">Poids des poules</span>** : 2218 g.

*Les poids varient de 1500 g √† 3000 g, refl√©tant les diff√©rences entre races.*

ü•ó **<span class="desc">Quantit√© de nourriture donn√©e</span>** : 116.25 g/jour.

*Distribution uniforme (100 √† 129 g).*
]
.pull-right[
‚òÄÔ∏è **<span class="desc">Exposition au soleil</span>** : 8.30 h/jour.

*Exposition √©quilibr√©e, variant de 5 √† 11 heures.*

ü•ö **<span class="desc">Poids des ≈ìufs</span>** : 43.43 g.

*Les ≈ìufs p√®sent entre 30.08 g et 58.93 g.*
]
---

class: middle,  center

```{r echo=FALSE}
eggdata <- eggdata %>%
  rename(
    `Production d'≈ìufs par jour` = EggsPerDay,
    `Poids des poules (g)` = GallusWeight,
    `Quantit√© de nourriture (g)` = AmountOfFeed,
    `Exposition au soleil (h)` = SunLightExposure,
    `Poids des ≈ìufs (g)` = GallusEggWeight,
    `Race de poule` = GallusBreed
  )

```

```{r echo=FALSE ,fig.width=6, fig.height=10}
eggdata_grouped <- eggdata %>%
  group_by(`GallusID`, `Race de poule`) %>%
  summarise(
    `Production moyenne d'≈ìufs par jour` = mean(`Production d'≈ìufs par jour`, na.rm = TRUE)
  ) %>%
  ungroup()

# Histogrammes s√©par√©s pour les deux races avec des couleurs diff√©rentes
ggplot(eggdata_grouped, aes(x = `Production moyenne d'≈ìufs par jour`, fill = `Race de poule`)) +
  geom_histogram(binwidth = 0.1, color = "black", alpha = 0.8) +
  facet_wrap(~ `Race de poule`, scales = "free_y",ncol=1) +  # Placer les graphiques verticalement
  scale_fill_manual(values = c("skyblue", "orange")) +  # Couleurs sp√©cifiques pour chaque race
  labs(
    title = "Distribution moyenne de la production d'≈ìufs par race",
    x = "Production moyenne d'≈ìufs par jour",
    y = "Fr√©quence",
    fill = "Race de poule"
  ) +
  theme_minimal()

```
---

### Interpretation üêî:
- **Ameraucana** :
  - Tr√®s r√©guli√®res : Pondent en moyenne **1 ≈ìuf par jour** sans variation notable.
  - Peu nombreuses dans l'√©chantillon.

- **Marans** :
  - Beaucoup plus nombreuses, avec une **variabilit√© importante** dans la production d'≈ìufs, allant de presque **0 √† 1 ≈ìuf par jour**.

- **Conclusion** :
  - Les **Ameraucana** sont des pondeuses r√©guli√®res, tandis que les **Marans**, bien que plus nombreuses, montrent une diversit√© de production li√©e √† des facteurs potentiellement externes ou biologiques.

---

```{r echo=FALSE}
# Ajouter le poids moyen des ≈ìufs au regroupement
eggdata_grouped <- eggdata %>%
  group_by(`GallusID`, `Race de poule`) %>%
  summarise(
    `Quantit√© de nourriture moyenne (g)` = mean(`Quantit√© de nourriture (g)`, na.rm = TRUE),
    `Production moyenne d'≈ìufs par jour` = mean(`Production d'≈ìufs par jour`, na.rm = TRUE),
    `Poids moyen des ≈ìufs (g)` = mean(`Poids des ≈ìufs (g)`, na.rm = TRUE)  # Remplacer par la colonne correcte pour le poids des ≈ìufs
  ) %>%
  ungroup()

# Scatterplot avec la taille des points repr√©sentant le poids moyen des ≈ìufs
ggplot(eggdata_grouped, aes(
  x = `Quantit√© de nourriture moyenne (g)`,
  y = `Production moyenne d'≈ìufs par jour`,
  color = `Race de poule`,
  size = `Poids moyen des ≈ìufs (g)`  # Utiliser le poids des ≈ìufs pour la taille
)) +
  geom_point(alpha = 0.7) +
  labs(
    title = "Relation entre la quantit√© de nourriture, la production moyenne d'≈ìufs et le poids moyen des ≈ìufs",
    x = "Quantit√© de nourriture moyenne (g)",
    y = "Production moyenne d'≈ìufs par jour",
    color = "Race de poule",
    size = "Poids moyen des ≈ìufs (g)"
  ) +
  scale_color_manual(values = c("skyblue", "orange")) +
  theme_minimal()
```
---
### **Interpr√©tation üêî**

- **Ameraucana** :
  - Consomment entre **100 g et 115 g** de nourriture par jour.
  - Maintiennent un **taux de ponte √©lev√©**, exactement de **1 ≈ìuf par jour**.
  - Produisent des ≈ìufs **plus gros**, ce qui les positionne comme une race efficace.

- **Marans** :
  - Consomment entre **105 g et 130 g** de nourriture par jour.
  - Affichent une **variabilit√© importante** dans la production d'≈ìufs, quel que soit le niveau de nourriture.
  - Les ≈ìufs sont plus petits compar√©s √† ceux des Ameraucana.

### **Conclusion** :
Les **Ameraucana** se distinguent par une consommation mod√©r√©e et des performances √©lev√©es (grande taille des ≈ìufs et taux de ponte stable). Elles semblent √™tre une **option optimale** pour la production. Les **Marans**, bien que plus gourmandes, montrent des r√©sultats moins homog√®nes.

---
```{r echo=FALSE}
# Calcul de la production moyenne et de l'exposition moyenne par race et par heure
eggdata_grouped_race <- eggdata %>%
  group_by(`Race de poule`, `Exposition au soleil (h)`) %>%
  summarise(
    `Production moyenne d'≈ìufs par jour` = mean(`Production d'≈ìufs par jour`, na.rm = TRUE),
    .groups = "drop"
  )

# Graphique en barres empil√©es
ggplot(eggdata_grouped_race, aes(x = as.factor(`Exposition au soleil (h)`), 
                                 y = `Production moyenne d'≈ìufs par jour`, 
                                 fill = `Race de poule`)) +
  geom_bar(stat = "identity", position = "dodge", color = "black") +
  labs(
    title = "Impact de l'exposition au soleil sur la production moyenne d'≈ìufs par race",
    x = "Heures moyennes d'exposition au soleil",
    y = "Production moyenne d'≈ìufs par jour",
    fill = "Race de poule"
  ) +
  scale_fill_manual(values = c("skyblue", "orange")) +  # Couleurs pour diff√©rencier les races
  theme_minimal()

```
---



```{r boring-regression ,echo=FALSE}
# Calcul de la production moyenne par race et par heure d'exposition
eggdata_grouped_race <- eggdata %>%
  group_by(`Race de poule`, `Exposition au soleil (h)`) %>%
  summarise(
    `Production moyenne d'≈ìufs par jour` = mean(`Production d'≈ìufs par jour`, na.rm = TRUE),
    .groups = "drop"
  )

# Graphique en lignes
ggplot(eggdata_grouped_race, aes(x = `Exposition au soleil (h)`, 
                                 y = `Production moyenne d'≈ìufs par jour`, 
                                 color = `Race de poule`, group = `Race de poule`)) +
  geom_line(size = 1) +  # Lignes pour chaque race
  geom_point(size = 2) +  # Points pour souligner les valeurs sp√©cifiques
  labs(
    title = "Impact de l'exposition au soleil sur la production moyenne d'≈ìufs par race",
    x = "Heures moyennes d'exposition au soleil",
    y = "Production moyenne d'≈ìufs par jour",
    color = "Race de poule"
  ) +
  scale_color_manual(values = c("skyblue", "orange")) +  # Couleurs pour diff√©rencier les races
  theme_minimal()

```

---
### Interpretation üêî

##### Ameraucana ü•ö
- **Production moyenne constante** : La production d'≈ìufs est stable √† **1 ≈ìuf par jour**, quel que soit le niveau d'exposition au soleil.
- **Ind√©pendance environnementale** : Cette r√©gularit√© √©lev√©e sugg√®re que la race **Ameraucana** n'est pas significativement influenc√©e par les heures d'exposition au soleil.

##### Marans üåû
- **Sensibilit√© √† l'exposition** : Une tendance montre que les poules **Marans** ayant plus d'heures d'exposition au soleil augmentent l√©g√®rement leur production d'≈ìufs.
- **Variabilit√© observ√©e** : Contrairement aux Ameraucana, la production des Marans varie davantage et semble √™tre influenc√©e par des facteurs environnementaux.


### Conclusion üéØ

- **Ameraucana** : Cette race maintient une **production optimale** sans d√©pendre des facteurs environnementaux comme l'exposition au soleil.
- **Marans** : Cette race semble **b√©n√©ficier d'une exposition accrue au soleil**, bien que d'autres facteurs externes ou biologiques puissent √©galement jouer un r√¥le dans cette variabilit√©.

---
class: inverse, middle, center



# **M√©thodes statistiques envisag√©es**


---
```{r echo=FALSE}
# Filtrer les donn√©es pour garantir des valeurs valides
eggdata_cleaned <- eggdata %>%
  filter(!is.na(`Production d'≈ìufs par jour`) & 
           `Production d'≈ìufs par jour` >= 0 & 
           `Production d'≈ìufs par jour` <= 1)

# Filtrer les donn√©es par race
eggdata_marans <- eggdata_cleaned %>% filter(`Race de poule` == "Marans")

eggdata_ameraucana <- eggdata_cleaned %>% filter(`Race de poule` == "Ameraucana")

# R√©gression lin√©aire pour les Marans
model_marans <- lm(
  formula = `Production d'≈ìufs par jour` ~ `Poids des poules (g)` + 
    `Quantit√© de nourriture (g)` + `Exposition au soleil (h)`,
  data = eggdata_marans
)

model_summary <- summary(model_marans)

summary_table <- as.data.frame(model_summary$coefficients)
summary_table <- summary_table %>%
  rownames_to_column(var = "Variable") %>%
  rename(
    `Estimation` = Estimate,
    `Erreur standard` = `Std. Error`,
    `Valeur t` = `t value`,
    `p-value` = `Pr(>|t|)`
  )

# Afficher le tableau avec kable
library(knitr)
kable(
  summary_table, 
  format = "html", 
  caption = "R√©sultats de la r√©gression lin√©aire pour les Marans",
  table.attr = "class='wide-table'"
)

```

- **Poids des poules (g)** :
  - Effet **positif et significatif** (**p < 0.001**).
  - Une augmentation de **100 g** est associ√©e √† **+0.00491 ≈ìuf par jour**.

- **Quantit√© de nourriture (g)** :
  - Effet **n√©gatif et significatif** (**p < 0.01**).
  - Une augmentation de **1 g** entra√Æne **-0.00277 ≈ìuf par jour**.

- **Exposition au soleil (h)** :
  - Effet **positif mais non significatif** (**p = 0.092**).
  - Une heure suppl√©mentaire augmente la production de **0.01 ≈ìuf par jour**, mais sans certitude statistique.

---
```{r echo=FALSE}



model_ameraucana <- lm(
  formula = `Production d'≈ìufs par jour` ~ `Poids des poules (g)` + 
    `Quantit√© de nourriture (g)` + `Exposition au soleil (h)`,
  data = eggdata_ameraucana
)

# Obtenir le r√©sum√© du mod√®le pour les Ameraucana
model_summary <- summary(model_ameraucana)

# Transformer les coefficients en un tableau avec des noms clairs
summary_table <- as.data.frame(model_summary$coefficients)
summary_table <- summary_table %>%
  rownames_to_column(var = "Variable") %>%
  rename(
    `Estimation` = Estimate,
    `Erreur standard` = `Std. Error`,
    `Valeur t` = `t value`,
    `p-value` = `Pr(>|t|)`
  )

options(scipen = 0)

kable(
  summary_table, 
  format = "html", 
  caption = "R√©sultats de la r√©gression lin√©aire pour les Ameraucana",
  table.attr = "class='wide-table'"
)


```

- **Poids des poules (g)** :
  - Effet **positif mais non significatif** (**p = 0.236**).
  - Une augmentation de 100 g du poids des poules est associ√©e √† une augmentation tr√®s faible de 0.00011 ≈ìuf par jour.

- **Quantit√© de nourriture (g)** :
  - Effet **n√©gatif mais non significatif** (**p = 0.388**).
  - Une augmentation de 1 g de nourriture est associ√©e √† une diminution de 0.00003 ≈ìuf par jour.

- **Exposition au soleil (h)** :
  - Effet **positif mais non significatif** (**p = 0.865**).
  - Chaque heure suppl√©mentaire d'exposition au soleil est associ√©e √† une augmentation de 0.00001 ≈ìuf par jour.

---
class: inverse, middle, center

### Conclusion
---


Les **Ameraucana** apparaissent comme la meilleure race gr√¢ce √† leur r√©gularit√© et leur faible d√©pendance aux conditions comme l'exposition au soleil ou la quantit√© de nourriture. Cependant, les **Marans** pr√©sentent un bon potentiel de production avec des ajustements pr√©cis, bien que leurs donn√©es montrent une plus grande variabilit√©. Une √©tude plus approfondie serait n√©cessaire pour confirmer ces r√©sultats.

